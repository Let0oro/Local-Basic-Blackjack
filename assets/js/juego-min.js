const miModulo=(()=>{"use strict";let c=[],a=document.querySelectorAll("button"),d=document.querySelectorAll(".divCartas"),e=document.querySelectorAll("small"),f,g=2,b=(a=g)=>{c=h(),f=Array(a).fill(0)},h=()=>c=_.shuffle(["C","D","H","S"].map(a=>"123456789AJQK".split("").map(b=>(Number(b)+1||b)+a)).reduce((a,b)=>a+","+b).split(",")),i=()=>0===c.length?console.warn("No hay cartas en el deck"):c.pop(),j=a=>isNaN(a.slice(0,-1))?"A"===a.slice(0,-1)?11:10:1*a.slice(0,-1),k=(b,a)=>(f[a]=f[a]+j(b),e[a].innerText=f[a],f[a]),l=c=>{let b=i(),a=document.createElement("img");return a.className="carta",a.src=`./assets/cartas/${b}.png`,d[c].append(a),b},m=b=>{let c=l(b),a=k(c,b);(a>21||21===a)&&o(a)},n=a=>{let b=0;do{let c=l(f.length-1);b=k(c,f.length-1)}while(a<21&&b<=a)p()},o=b=>{a[1].disabled?a[1].disabled=!1:a[1].disabled=!0,a[2].disabled?a[2].disabled=!1:a[2].disabled=!0,n(b)},p=()=>{let[a,b]=f;setTimeout(()=>{a===b?alert("Nadie gana"):b<=21&&a<b||a>21?alert("Losiento mucho, has perdido"):alert("Has ganado!!!")},100); //!/ así aparece el alert después de que aparezcz la puntuación y la carta
};return a[0].addEventListener("click",()=>{b(),e.forEach(a=>{a.innerText=0}),d.forEach(a=>a.innerHTML=""),a.forEach(a=>a.disabled=!1),[3,4].map(b=>a[b].disabled=!0),console.clear()}),a[1].addEventListener("click",()=>{m(0)}),a[2].addEventListener("click",()=>{o(f[0])}),a[3].addEventListener("click",()=>{}),a[4].addEventListener("click",()=>{}),{nuevoJuego:b}})()